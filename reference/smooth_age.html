<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Use data on numbers of events and population
at risk to produce estimates of rates that
are smoothed over age. The amount of smoothing
depends on the model used to represent age effects.
Current choices are Spline() (the default) and
RW2(). See the documentation for Spline() and
RW2() for a description of the mathematical models
underlying the smoothing."><title>Smooth rates over age — smooth_age • BayesRates</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Smooth rates over age — smooth_age"><meta property="og:description" content="Use data on numbers of events and population
at risk to produce estimates of rates that
are smoothed over age. The amount of smoothing
depends on the model used to represent age effects.
Current choices are Spline() (the default) and
RW2(). See the documentation for Spline() and
RW2() for a description of the mathematical models
underlying the smoothing."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BayesRates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vig1_nz.html">vig1_nz</a>
    <a class="dropdown-item" href="../articles/vig2_cn.html">vig2_cn</a>
    <a class="dropdown-item" href="../articles/vig3_math.html">vig3_math</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Smooth rates over age</h1>
      
      <div class="d-none name"><code>smooth_age.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use data on numbers of events and population
at risk to produce estimates of rates that
are smoothed over age. The amount of smoothing
depends on the model used to represent age effects.
Current choices are <code><a href="Spline.html">Spline()</a></code> (the default) and
<code><a href="RW2.html">RW2()</a></code>. See the documentation for <code><a href="Spline.html">Spline()</a></code> and
<code><a href="RW2.html">RW2()</a></code> for a description of the mathematical models
underlying the smoothing.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">smooth_age</span><span class="op">(</span></span>
<span>  <span class="va">nevent_df</span>,</span>
<span>  <span class="va">py_df</span>,</span>
<span>  agevar <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  byvar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  age_width_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  age_min <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spec_age <span class="op">=</span> <span class="fu"><a href="Spline.html">Spline</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>nevent_df</dt>
<dd><p>A data frame with a column
called <code>"nevent"</code> containing the number of events,
plus additional classification variables.</p></dd>


<dt>py_df</dt>
<dd><p>A data frame with a column called <code>"py"</code>
containing exposure, plus additional
classification variables.</p></dd>


<dt>agevar</dt>
<dd><p>The name of the age variable in
<code>nevent_df</code> and <code>py_df</code>.
Defaults to <code>"age"</code>.</p></dd>


<dt>byvar</dt>
<dd><p>The names of classification variables in <code>nevent_df</code>
and <code>py_df</code>, other than age (eg <code>"sex"</code> or <code>"region"</code>).
Optional.</p></dd>


<dt>age_width_df</dt>
<dd><p>A data frame with columns <code>"age"</code>
and <code>"width"</code>, giving the widths of each age group.
Required if the age group labels are not integers.</p></dd>


<dt>age_min</dt>
<dd><p>The lower limit of the youngest age group.
Required if the age group labels are not integers.</p></dd>


<dt>spec_age</dt>
<dd><p>The prior model for the age effect.
Current choices: <code><a href="Spline.html">Spline()</a></code> and <code><a href="RW2.html">RW2()</a></code>. Defaults to
<code><a href="Spline.html">Spline()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>"BayesRates_results"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Dataset <code>nevent_df</code> must contain a
variable called <code>nevent</code> giving counts of events,
and dataset <code>py_df</code> must contain a variable called
<code>py</code> giving the population at risk.</p>
<p><code>nevent_df</code> and <code>py_df</code> must also contain
an age variable. If the age variable users multi-year
age groups (eg <code>"15-19"</code> or <code>"65+"</code>), then
<code>smooth_age()</code> needs help interpreting these age groups.
A data frame <code>age_width_df</code> must be supplied giving
the width of each age group, as well as a
value <code>age_min</code> giving the lower limit of the
youngest age group. (Future versions of <code>BayesRates</code>
will try to parse age group labels automatically.)</p>
<p><code>nevent_df</code> and <code>py_df</code> must <em>not</em> contain a time variable.
To analyse data with age and time dimensions, use
function <code><a href="smooth_agetime.html">smooth_agetime()</a></code>.</p>
<p><code>nevent_df</code> and <code>py_df</code> can contain additional
classifying variables, such as sex and region.
Independent models are fitted for each combination
of the levels of these additional variables.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="smooth_agetime.html">smooth_agetime()</a></code> models rates that vary
over age and time.</p></li>
<li><p><code><a href="Spline.html">Spline()</a></code> and <code><a href="RW2.html">RW2()</a></code> specify age effects</p></li>
<li><p><code><a href="augment.BayesRates_results.html">augment()</a></code>
combines data and estimates for rates.</p></li>
<li><p><code><a href="components.BayesRates_results.html">components()</a></code>
extracts rates, age effects,
time effects, and hyper-parameters.</p></li>
<li><p><code><a href="n_draw.html">n_draw()</a></code> sets the default number
of draws from the posterior distribution.</p></li>
<li><p><code><a href="total_rate.html">total_rate()</a></code> calculates a summary indicator.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">smooth_age</span><span class="op">(</span>nevent_df <span class="op">=</span> <span class="va">nz_divorces_2020</span>,</span></span>
<span class="r-in"><span>                  py_df <span class="op">=</span> <span class="va">nz_population_2020</span>,</span></span>
<span class="r-in"><span>                  age_width_df <span class="op">=</span> <span class="va">nz_age_width_df</span>,</span></span>
<span class="r-in"><span>                  age_min <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- Object of class "BayesRates_results" ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      nevent ~ Poisson(rate * py)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   log(rate) = age_effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  age_effect ~ Spline()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    agevar: age</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     byvar: &lt;none&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    n_draw: 1000</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by John Bryant, Junni Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer></div>

  

  

  </body></html>

